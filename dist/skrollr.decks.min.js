/*!
 * skrollr-decks 1.0.9
 * Fullpage presentation decks with scrolling
 * https://github.com/TrySound/skrollr-decks
 * 
 * Released under the MIT license
 * Copyright (c) 2015, Bogdan Chadkin <trysound@yandex.ru>
 */
!function(t){"use strict";window.skrollr?window.skrollr.decks=t(window,document,window.skrollr):console.error("`skrollr` not found")}(function(t,e,n){"use strict";function o(t,e){(t=t.toLowerCase())in g&&"function"==typeof e&&g[t].unshift(e)}function r(t,e){var n,o=g[t];for(n=o.length-1;n>-1;n--)o[n].apply({},e)}function i(i){if(p)return!1;p=!0;var a,f,g,m,v=t.setTimeout,w=t.clearTimeout;m=c={},i="object"==typeof i?i:{};for(a in h)h.hasOwnProperty(a)&&(c[a]=i[a]||h[a]);f=n.init({forceHeight:!1}),b=d(m.decks,y),k=u(y),l(),e.body.appendChild(k),f.refresh(k.children),o("change",function(e){var n="#"+e.id;m.history&&(history.pushState?history.pushState(null,null,n):t.location.hash=n)}),f.on("render",function(t){var e=this,n=s.call(e,t);w(g),void 0!==n&&m.autoscroll&&(g=v(function(){e.animateTo(n,m)},m.delay)),r("render",[t])})}function a(t,e){var o,r,i,a=b[t],l=n.get();return l&&(l.stopAnimateTo(),a||(r=k.getElementsByClassName("skrollable-between"),1===r.length&&(i=Number(r[0].getAttribute("data-skrollr-decks-index")),a=y["up"===t?i-1:"down"===t?i+1:-1]),2===r.length&&(r=r["up"===t?0:"down"===t?1:-1],a=r?b[r.getAttribute("data-anchor-target")]:null)),a)?(o=l.relativeToAbsolute(a,"top","top")+1,e?l.setScrollTop(o,!0):l.animateTo(o,c),!0):!1}function l(){if(p){var e,o,r,i=t.innerHeight+2;for(r=y.length-1;r>-1;r--)e=y[r],e.style.height="auto",o=e.offsetHeight,e.style.height=(i>o?i:o)+"px";n.get().refresh(y)}}function s(e){if(p){var o,i,a,l,s,d,u=n.get(),h=k.getElementsByClassName("skrollable-between"),g=e.curTop,y=t.innerHeight,m=y*c.offset/100;return 1===h.length&&(o=b[h[0].getAttribute("data-anchor-target")],f!==o&&r("change",[o]),f=o),2===h.length?(i=b[h[0].getAttribute("data-anchor-target")],a=b[h[1].getAttribute("data-anchor-target")],s=u.relativeToAbsolute(i,"top","bottom"),l=u.relativeToAbsolute(a,"top","top"),"up"===e.direction&&s-m>g||l+m>g+y?(o=i,d=s-y-1):(o=a,d=l+1),f!==o&&r("change",[o]),f=o,d):void 0}}function d(t,n){{var o,r,i={};+new Date}if("string"==typeof t)for(t=e.querySelectorAll(t),r=t.length-1;r>-1;r--)o=t[r],n.unshift(o),o.id=o.id?o.id:"skroll-deck-id-"+r,i["#"+o.id]=o;return i}function u(t){var n,o,r,i=e.createElement("ul"),a=e.createElement("li");for(i.style.display="none",a.setAttribute("data-top-bottom",""),a.setAttribute("data-bottom-top",""),n=0,o=t.length;o>n;n++)r=a.cloneNode(),r.setAttribute("data-skrollr-decks-index",n),r.setAttribute("data-anchor-target","#"+t[n].id),i.appendChild(r);return i}var c,f,h={decks:".skrollr-deck",offset:10,duration:600,easing:"quadratic",delay:500,autoscroll:!0,history:!1},g={render:[],change:[]},p=!1,b={},y=[],k=e.createElement("ul");return n.addEvent(e,"keydown",function(t){var e=n.get(),o=[38,40,33,34,36,35];o.indexOf(t.keyCode)>-1&&e&&e.isAnimatingTo()&&e.stopAnimateTo()}),n.addEvent(e,"DOMContentLoaded",function(){e.querySelector("body.skrollr-decks-init")&&i()}),n.addEvent(t,"load resize",function(){l({}),f?a("#"+f.id,!0):s({})}),{init:i,animateTo:a,refresh:l,on:o}});