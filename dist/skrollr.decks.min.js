/*!
 * skrollr-decks 1.0.0
 * Fullpage presentation decks with scrolling
 * https://github.com/TrySound/skrollr-decks
 * 
 * Released under the MIT license
 * Copyright (c) 2015, Bogdan Chadkin <trysound@yandex.ru>
 */
!function(t){"use strict";window.skrollr?window.skrollr.decks=t(window,document,window.skrollr):console.error("`skrollr` not found")}(function(t,e,o){"use strict";function n(n){if(g)return!1;g=!0;var r,l,m;n="object"==typeof n?n:{};for(r in u)u.hasOwnProperty(r)&&(p[r]=n[r]||u[r]);l=o.init({forceHeight:!1}),h=s(p.decks,b),k=d(b),i(),e.body.appendChild(k),l.refresh(k.children),p.autoscroll&&(t.addEventListener("resize",a,!1),l.on("render",function(t){f(m),m=c(function(){a(t)},p.delay)}))}function r(t,e){var n,r,i,a=h[t],l=o.get();return l&&(l.stopAnimateTo(),a||(r=k.getElementsByClassName("skrollable-between"),1===r.length&&(i=Number(r[0].getAttribute("data-skrollr-decks-index")),a=b["up"===t?i-1:"down"===t?i+1:-1]),2===r.length&&(r=r["up"===t?0:"down"===t?1:-1],a=r?h[r.getAttribute("data-anchor-target")]:null)),a)?(n=l.relativeToAbsolute(a,"top","top")+1,e?l.setScrollTop(n,!0):l.animateTo(n,p),!0):!1}function i(){var e,o,n,r=t.innerHeight+2;for(n in h)h.hasOwnProperty(n)&&(e=h[n],e.style.height="auto",o=e.offsetHeight,e.style.height=(r>o?r:o)+"px")}function a(t){var e,n,r,i=o.get(),a=k.getElementsByClassName("skrollable-between");2===a.length&&(n="up"===t.direction?0:1,r="up"===t.direction?1:0,e=h[a[n].getAttribute("data-anchor-target")],l(e)||(e=h[a[r].getAttribute("data-anchor-target")]),i.animateTo(i.relativeToAbsolute(e,"top","top")+1,p))}function l(e){var n=o.get(),r=n.getScrollTop(),i=t.innerHeight,a=r+i,l=n.relativeToAbsolute(e,"top","top"),s=n.relativeToAbsolute(e,"top","bottom"),d=i*p.offset/100;return a>l+d&&s-d>r}function s(t,o){{var n,r,i={};+new Date}if("string"==typeof t)for(t=e.querySelectorAll(t),r=t.length-1;r>-1;r--)n=t[r],o.unshift(n),n.id=n.id?n.id:"skroll-deck-id-"+r,i["#"+n.id]=n;return i}function d(t){var o,n,r,i=e.createElement("ul"),a=e.createElement("li");for(i.style.display="none",a.setAttribute("data-top-bottom",""),a.setAttribute("data-bottom-top",""),o=0,n=t.length;n>o;o++)r=a.cloneNode(),r.setAttribute("data-skrollr-decks-index",o),r.setAttribute("data-anchor-target","#"+t[o].id),i.appendChild(r);return i}var u={decks:".skrollr-deck",offset:15,duration:600,easing:"quadratic",delay:500,autoscroll:!0,onRender:null},c=t.setTimeout,f=t.clearTimeout,g=!1,p={},h={},b=[],k=e.createElement("ul");return e.addEventListener("keydown",function(t){var e=o.get(),n=[38,40,33,34,36,35];n.indexOf(t.keyCode)>-1&&e&&e.isAnimatingTo()&&e.stopAnimateTo()},!1),t.addEventListener("resize",i),e.addEventListener("DOMContentLoaded",function(){var t=e.querySelector(".skrollr-decks-init");t&&"BODY"===t.tagName&&n()},!1),{init:n,animateTo:r,refresh:i}});