/*!
 * skrollr-decks 1.0.4
 * Fullpage presentation decks with scrolling
 * https://github.com/TrySound/skrollr-decks
 * 
 * Released under the MIT license
 * Copyright (c) 2015, Bogdan Chadkin <trysound@yandex.ru>
 */
!function(e){"use strict";window.skrollr?window.skrollr.decks=e(window,document,window.skrollr):console.error("`skrollr` not found")}(function(e,t,n){"use strict";function o(e,t){(e=e.toLowerCase())in h&&"function"==typeof t&&h[e].unshift(t)}function r(e,t){var n,o=h[e];for(n=o.length-1;n>-1;n--)o[n].apply({},t)}function i(o){if(b)return!1;b=!0;var i,a,s;o="object"==typeof o?o:{};for(i in g)g.hasOwnProperty(i)&&(m[i]=o[i]||g[i]);var a=(m.onRender,m.onChange,n.init({forceHeight:!1}));k=u(m.decks,y),A=c(y),l(),t.body.appendChild(A),a.refresh(A.children),a.on("render",function(t){var n=d(t);v(s),n&&m.autoscroll&&(s=p(function(){var o="up"===t.direction,r=o?-e.innerHeight-1:1;r+=a.relativeToAbsolute(n,"top",o?"bottom":"top"),a.animateTo(r,m)},m.delay)),r("render",[t])})}function a(e,t){var o,r,i,a=k[e],l=n.get();return l&&(l.stopAnimateTo(),a||(r=A.getElementsByClassName("skrollable-between"),1===r.length&&(i=Number(r[0].getAttribute("data-skrollr-decks-index")),a=y["up"===e?i-1:"down"===e?i+1:-1]),2===r.length&&(r=r["up"===e?0:"down"===e?1:-1],a=r?k[r.getAttribute("data-anchor-target")]:null)),a)?(o=l.relativeToAbsolute(a,"top","top")+1,t?l.setScrollTop(o,!0):l.animateTo(o,m),!0):!1}function l(){var t,n,o,r=e.innerHeight+2;for(o=y.length-1;o>-1;o--)t=y[o],t.style.height="auto",n=t.offsetHeight,t.style.height=(r>n?r:n)+"px";t.offsetHeight}function d(e){var t,o,i,a=(n.get(),A.getElementsByClassName("skrollable-between"));return 1===a.length&&(t=k[a[0].getAttribute("data-anchor-target")],f!==t&&r("change",[t]),f=t),2===a.length?(o="up"===e.direction?0:1,i="up"===e.direction?1:0,t=k[a[o].getAttribute("data-anchor-target")],s(t)||(t=k[a[i].getAttribute("data-anchor-target")]),f!==t&&r("change",[t]),f=t,t):void 0}function s(t){var o=n.get(),r=o.getScrollTop(),i=e.innerHeight,a=r+i,l=o.relativeToAbsolute(t,"top","top"),d=o.relativeToAbsolute(t,"top","bottom"),s=i*m.offset/100;return a>l+s&&d-s>r}function u(e,n){{var o,r,i={};+new Date}if("string"==typeof e)for(e=t.querySelectorAll(e),r=e.length-1;r>-1;r--)o=e[r],n.unshift(o),o.id=o.id?o.id:"skroll-deck-id-"+r,i["#"+o.id]=o;return i}function c(e){var n,o,r,i=t.createElement("ul"),a=t.createElement("li");for(i.style.display="none",a.setAttribute("data-top-bottom",""),a.setAttribute("data-bottom-top",""),n=0,o=e.length;o>n;n++)r=a.cloneNode(),r.setAttribute("data-skrollr-decks-index",n),r.setAttribute("data-anchor-target","#"+e[n].id),i.appendChild(r);return i}var f,g={decks:".skrollr-deck",offset:15,duration:600,easing:"quadratic",delay:500,autoscroll:!0},h={render:[],change:[]},p=e.setTimeout,v=e.clearTimeout,b=!1,m={},k={},y=[],A=t.createElement("ul");return t.addEventListener("keydown",function(e){var t=n.get(),o=[38,40,33,34,36,35];o.indexOf(e.keyCode)>-1&&t&&t.isAnimatingTo()&&t.stopAnimateTo()},!1),t.addEventListener("DOMContentLoaded",function(){var e=t.querySelector(".skrollr-decks-init");e&&"BODY"===e.tagName&&i()},!1),e.addEventListener("load",l,!1),e.addEventListener("load",d,!1),e.addEventListener("resize",l,!1),e.addEventListener("resize",d,!1),{init:i,animateTo:a,refresh:l,on:o}});